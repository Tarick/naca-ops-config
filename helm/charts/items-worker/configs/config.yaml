---
# Logging map partially mimics configuration of uber/zap Config structure
# See  https://pkg.go.dev/go.uber.org/zap
logging:
  # Development key puts the logger in development mode, which changes the behavior of DPanicLevel and takes stacktraces more liberally.
  development: true
  # level: info
  level: {{ .Values.config.logging.level }}
  encoding: {{ .Values.config.logging.encoding }}
  # encoding: json
  # encoding: console
  disable_caller: {{ .Values.config.logging.disable_caller }}
  disable_stacktrace: {{ .Values.config.logging.disable_stacktrace }}
  disable_color: {{ .Values.config.logging.disable_color }}
  # output_paths: ["stdout", "/tmp/1.log"]
  output_paths: ["stdout"]
  error_output_paths: ["stderr"]

database:
  hostname: {{ .Values.config.database.hostname }}
  port: {{ .Values.config.database.port }}
  name: {{ .Values.config.database.name }}
  username: {{ .Values.config.database.username }}
  password: {{ .Values.config.database.password }}
  sslmode: {{ .Values.config.database.sslmode }}
  log_level: {{ .Values.config.database.log_level }}
  min_connections: {{ .Values.config.database.min_connections }}
  max_connections: {{ .Values.config.database.max_connections }}

consume:
  nsqlookup: {{ .Values.config.consume.nsqlookup }}
  topic: {{ .Values.config.consume.topic }}
  channel: {{ .Values.config.consume.channel }}
  # prefetch (in flight) messages should be bigger than workers
  prefetch: {{ .Values.config.consume.prefetch }}
  workers: {{ .Values.config.consume.workers }}
  attempts: {{ .Values.config.consume.attempts }}
